<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SSAI AI Builder â€” Login</title>
<style>
body { font-family: Inter, system-ui, Arial; display:flex; align-items:center; justify-content:center; height:100vh; margin:0; }
.card { width:420px; padding:24px; box-shadow:0 6px 20px rgba(0,0,0,.08); border-radius:12px }
input, button { width:100%; padding:10px; margin-top:8px }
.muted { color:#666; font-size:13px }
</style>
</head>
<body>
<div class="card">
<h2>SSAI AI Builder</h2>
<p class="muted">Sign up / Log in with email (Supabase Auth)</p>
<input id="email" placeholder="you@example.com" />
<input id="password" placeholder="password" type="password" />
<button id="signup">Sign up</button>
<button id="login">Log in</button>
<p id="msg" class="muted"></p>
</div>


<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
const SUPABASE_URL = '%%SUPABASE_URL%%' // replace before push or set via simple script
const SUPABASE_ANON = '%%SUPABASE_ANON%%'


const supabase = createClient(SUPABASE_URL, SUPABASE_ANON)


const emailEl = document.getElementById('email')
const passEl = document.getElementById('password')
const msgEl = document.getElementById('msg')


document.getElementById('signup').addEventListener('click', async () => {
msgEl.textContent = 'Signing up...'
const email = emailEl.value.trim()
const password = passEl.value
const { error } = await supabase.auth.signUp({ email, password })
if (error) msgEl.textContent = error.message
else msgEl.textContent = 'Check your email for confirmation. Then log in.'
})


document.getElementById('login').addEventListener('click', async () => {
msgEl.textContent = 'Logging in...'
const email = emailEl.value.trim()
const password = passEl.value
const { data, error } = await supabase.auth.signInWithPassword({ email, password })
if (error) { msgEl.textContent = error.message; return }
// go to dashboard
const user = data.user
localStorage.setItem('ssaib_user', JSON.stringify({ id: user.id, email: user.email }))
window.location.href = '/dashboard.html'
})
</script>
</body>
</html>
